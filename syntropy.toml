# syntropy.toml
#
# Workspace contract for Syntropy. Keep this file boring and hard to mess up.

[workspace]
name = "syntropy"
blueprint = "north-star/v0"

[output]
format_default = "human"
generate_readmes = true

[[override]]
path = "platform/crates/syntropy-sdk"
kind = "rust_crate"
purpose = "Rust SDK: deterministic workspace discovery, tree/info/readmes/validate."
rules = [
  "No printing; return structured types only.",
  "Prefer deterministic outputs and stable JSON keys.",
]

[[override]]
path = "products/command-center/apps/cli"
purpose = "Syntropy CLI: IO wrapper around syntropy-sdk."
rules = [
  "Keep output stable (human + JSON).",
]

[[override]]
path = "apps/web"
kind = "app_web"
purpose = "Syntropy OS web app shell (placeholder; not yet fully configured)."
rules = [
  "Keep this app shell thin; shared logic belongs in packages/.",
  "Prefer fixing missing capability in packages/ over adding ad-hoc logic here.",
]

[[override]]
path = "apps/mobile"
kind = "app_mobile"
purpose = "Syntropy OS mobile app shell (placeholder; Expo not yet configured)."
rules = [
  "Keep this app shell thin; shared logic belongs in packages/.",
  "Avoid duplicating domain rules; implement them in packages/domain-core first.",
]

[[override]]
path = "apps/dev-web"
kind = "app_dev_web"
purpose = "Dev Platform web app shell (placeholder; not yet fully configured)."
rules = [
  "Keep this app shell thin; shared logic belongs in packages/.",
  "Prefer evolving the knowledge graph and workspace platform APIs over one-off UI hacks.",
]

[[override]]
path = "apps/functions"
kind = "app_functions"
purpose = "Firebase Cloud Functions app shell (placeholder; not yet fully configured)."
rules = [
  "No UI dependencies.",
  "Prefer importing pure domain logic from packages/ over implementing logic in functions.",
]

[[override]]
path = "packages/shared-types"
kind = "ts_package"
purpose = "Cross-domain primitive types shared across the codebase."
rules = [
  "Do not depend on other @syntropy/* packages.",
  "Keep primitives stable; avoid domain-specific semantics here.",
]

[[override]]
path = "packages/domain-events"
kind = "ts_domain_package"
purpose = "Event sourcing primitives and event type definitions."
rules = [
  "Depend only on packages/shared-types.",
  "Keep pure (no Firebase/network side effects).",
]

[[override]]
path = "packages/domain-core"
kind = "ts_domain_package"
purpose = "Primary domain logic package (starting monolith; split later by bounded context)."
rules = [
  "Depend only on packages/shared-types and packages/domain-events.",
  "Keep domain logic pure; keep infrastructure plumbing in packages/firebase.",
]

[[override]]
path = "packages/firebase"
kind = "ts_package"
purpose = "Firebase client helpers and infrastructure plumbing."
rules = [
  "No domain business logic; keep domain rules in packages/domain-core.",
  "Keep the public surface small and stable; prefer helpers over abstractions.",
]

[[override]]
path = "packages/design-tokens"
kind = "ts_package"
purpose = "Design tokens (colors, spacing, typography) shared across surfaces."
rules = [
  "No runtime dependencies; export constants only.",
  "Keep tokens platform-agnostic and stable.",
]
